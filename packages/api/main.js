const domestik = {
  "data": [
    {
      "attributes": {
        "nama": "CUYUNIVERSE.CO",
        "website": "Cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-01"
      }
    },
    {
      "attributes": {
        "nama": "STAGING CUYUNIVERSE.CO",
        "website": "stg.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-02"
      }
    },
    {
      "attributes": {
        "nama": "DEV CUYUNIVERSE.CO",
        "website": "dev.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-03"
      }
    },
    {
      "attributes": {
        "nama": "TEST CUYUNIVERSE.CO",
        "website": "test.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-04"
      }
    },
    {
      "attributes": {
        "nama": "PRODUCT CUYUNIVERSE.CO",
        "website": "product.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-05"
      }
    },
    {
      "attributes": {
        "nama": "SHOWCASE CUYUNIVERSE.CO",
        "website": "showcase.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-06"
      }
    },
    {
      "attributes": {
        "nama": "COURSE CUYUNIVERSE.CO",
        "website": "course.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-07"
      }
    },
    {
      "attributes": {
        "nama": "TV CUYUNIVERSE.CO",
        "website": "tv.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-08"
      }
    },
    {
      "attributes": {
        "nama": "PODCAST CUYUNIVERSE.CO",
        "website": "podcast.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-09"
      }
    },
    {
      "attributes": {
        "nama": "STREAMING CUYUNIVERSE.CO",
        "website": "streaming.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-10"
      }
    },
    {
      "attributes": {
        "nama": "FJB CUYUNIVERSE.CO",
        "website": "fjb.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB2 CUYUNIVERSE.CO",
        "website": "fjb2.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB3 CUYUNIVERSE.CO",
        "website": "fjb3.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB33 CUYUNIVERSE.CO",
        "website": "fjb33.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB34 CUYUNIVERSE.CO",
        "website": "fjb34.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB35 CUYUNIVERSE.CO",
        "website": "fjb35.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB36 CUYUNIVERSE.CO",
        "website": "fjb36.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB37 CUYUNIVERSE.CO",
        "website": "fjb37.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB38 CUYUNIVERSE.CO",
        "website": "fjb38.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB39 CUYUNIVERSE.CO",
        "website": "fjb39.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB311 CUYUNIVERSE.CO",
        "website": "fjb311.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB312 CUYUNIVERSE.CO",
        "website": "fjb312.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB313 CUYUNIVERSE.CO",
        "website": "fjb313.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB314 CUYUNIVERSE.CO",
        "website": "fjb314.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB315 CUYUNIVERSE.CO",
        "website": "fjb315.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB316 CUYUNIVERSE.CO",
        "website": "fjb316.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB317 CUYUNIVERSE.CO",
        "website": "fjb317.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB318 CUYUNIVERSE.CO",
        "website": "fjb318.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    },
    {
      "attributes": {
        "nama": "FJB319 CUYUNIVERSE.CO",
        "website": "fjb319.cuyuniverse.co",
        "nama_perusahaan": "CUYUNIVERSE PT LTD",
        "tanggal_daftar": "2025-08-11"
      }
    }
  ]
};

const asing = {
  "data": [
    {
      "attributes": {
        "nama": "W3SCHOOL.COM",
        "website": "W3school.com",
        "nama_perusahaan": "W3SCHOOL",
        "tanggal_daftar": "2025-08-07"
      }
    },
    {
      "attributes": {
        "nama": "DEV.TO",
        "website": "Dev.to",
        "nama_perusahaan": "DEV TO",
        "tanggal_daftar": "2025-08-12"
      }
    },
    {
      "attributes": {
        "nama": "BITBUCKET.COM",
        "website": "Bitbucket.com",
        "nama_perusahaan": "BITBUCKET",
        "tanggal_daftar": "2025-08-16"
      }
    },
    {
      "attributes": {
        "nama": "GITLAB.COM",
        "website": "Gitlab.com",
        "nama_perusahaan": "GITLAB INC",
        "tanggal_daftar": "2025-08-19"
      }
    },
    {
      "attributes": {
        "nama": "GITHUB.COM",
        "website": "Github.com",
        "nama_perusahaan": "GITHUB INC",
        "tanggal_daftar": "2025-08-20"
      }
    },
    {
      "attributes": {
        "nama": "STACKOVERFLOW.COM",
        "website": "Stackoverflow.com",
        "nama_perusahaan": "STACKOVERFLOW",
        "tanggal_daftar": "2025-08-21"
      }
    },
    {
      "attributes": {
        "nama": "SOLOLEARN.COM",
        "website": "Sololearn.com",
        "nama_perusahaan": "SOLOLEARN",
        "tanggal_daftar": "2025-08-22"
      }
    },
    {
      "attributes": {
        "nama": "HACKERRANK.COM",
        "website": "Hackerrank.com",
        "nama_perusahaan": "HACKERANK",
        "tanggal_daftar": "2025-08-23"
      }
    },
    {
      "attributes": {
        "nama": "MOBILELEGENDS.COM",
        "website": "Mobilelegends.com",
        "nama_perusahaan": "MOBILE LEGENDS",
        "tanggal_daftar": "2025-08-23"
      }
    },
    {
      "attributes": {
        "nama": "FREELANCER.COM",
        "website": "Freelancer.com",
        "nama_perusahaan": "FREELANCER",
        "tanggal_daftar": "2025-08-24"
      }
    },
    {
      "attributes": {
        "nama": "DOTA1.COM",
        "website": "Dota1.com",
        "nama_perusahaan": "DOTA1",
        "tanggal_daftar": "2025-08-23"
      }
    },
    {
      "attributes": {
        "nama": "DOTA2.COM",
        "website": "Dota2.com",
        "nama_perusahaan": "DOTA2",
        "tanggal_daftar": "2025-08-23"
      }
    },
    {
      "attributes": {
        "nama": "DOTA3.COM",
        "website": "Dota3.com",
        "nama_perusahaan": "DOTA3",
        "tanggal_daftar": "2025-08-23"
      }
    },
    {
      "attributes": {
        "nama": "DOTA4.COM",
        "website": "Dota4.com",
        "nama_perusahaan": "DOTA4",
        "tanggal_daftar": "2025-08-23"
      }
    },
    {
      "attributes": {
        "nama": "DOTA5.COM",
        "website": "Dota5.com",
        "nama_perusahaan": "DOTA5",
        "tanggal_daftar": "2025-08-25"
      }
    },
    {
      "attributes": {
        "nama": "DOTA6.COM",
        "website": "Dota6.com",
        "nama_perusahaan": "DOTA6",
        "tanggal_daftar": "2025-08-26"
      }
    },
    {
      "attributes": {
        "nama": "DOTA7.COM",
        "website": "Dota7.com",
        "nama_perusahaan": "DOTA7",
        "tanggal_daftar": "2025-08-27"
      }
    },
    {
      "attributes": {
        "nama": "DOTA8.COM",
        "website": "Dota8.com",
        "nama_perusahaan": "DOTA8",
        "tanggal_daftar": "2025-08-28"
      }
    },
    {
      "attributes": {
        "nama": "DOTA9.COM",
        "website": "Dota9.com",
        "nama_perusahaan": "DOTA9",
        "tanggal_daftar": "2025-08-29"
      }
    },
    {
      "attributes": {
        "nama": "DOTA91.COM",
        "website": "Dota91.com",
        "nama_perusahaan": "DOTA91",
        "tanggal_daftar": "2025-08-29"
      }
    },
    {
      "attributes": {
        "nama": "DOTA921.COM",
        "website": "Dota921.com",
        "nama_perusahaan": "DOTA921",
        "tanggal_daftar": "2025-08-29"
      }
    },
    {
      "attributes": {
        "nama": "DOTA931.COM",
        "website": "Dota931.com",
        "nama_perusahaan": "DOTA931",
        "tanggal_daftar": "2025-08-29"
      }
    },
    {
      "attributes": {
        "nama": "DOTA941.COM",
        "website": "Dota941.com",
        "nama_perusahaan": "DOTA941",
        "tanggal_daftar": "2025-08-29"
      }
    },
    {
      "attributes": {
        "nama": "DOTA951.COM",
        "website": "Dota951.com",
        "nama_perusahaan": "DOTA951",
        "tanggal_daftar": "2025-08-29"
      }
    }
  ]
};

const paginate = (asing, limit, page) => {
  const totalData = parseInt(asing.data.length)
  let limits = parseInt(limit)

  const pageCount = Math.ceil(totalData / limits);

  let pages = parseInt(page);
  if (pages > pageCount) pages = pageCount;
  if (pages < 1) pages = 1;


  const newFrom = pages * limits - limits;
  const newTo = newFrom + limits;

  let data = []
  if (pages == 1) {
    for (let index = pages - 1; index < limits; index++) {
      data.push(asing.data[index]);
    }
  } else {
    for (let index = newFrom; index < newTo; index++) {
      data.push(asing.data[index]);
    }
  }

  return { data, pageCount, limits, pages, total: totalData };
}

const err = {
  "data": [
    {
      error: "not found"
    },
  ]
}

function main(args) {
  const { limit, page, option } = args
  console.info('serverless running to collect data => ', args)
  const { data, limits, pageCount, pages, total } = paginate(option == "asing" ? asing : option == "domestik" ? domestik : err, limit, page);
  return {
    body: {
      data,
      option: option,
      meta: {
        page: {
          currentPage: pages,
          perPage: limits,
          total: total,
          pageCount: pageCount,
        }
      }
    }
  }
};

exports.main = main
